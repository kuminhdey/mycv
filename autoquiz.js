'use strict';const _0x343832=_0x5200;(function(_0x3636e6,_0x4ed3ba){const _0x3dfd54=_0x5200,_0x389721=_0x3636e6();while(!![]){try{const _0x52c90a=parseInt(_0x3dfd54(0x19e))/0x1+parseInt(_0x3dfd54(0x1aa))/0x2+-parseInt(_0x3dfd54(0x155))/0x3+parseInt(_0x3dfd54(0x1bc))/0x4+parseInt(_0x3dfd54(0x13e))/0x5+-parseInt(_0x3dfd54(0x1b3))/0x6+-parseInt(_0x3dfd54(0x196))/0x7*(parseInt(_0x3dfd54(0x145))/0x8);if(_0x52c90a===_0x4ed3ba)break;else _0x389721['push'](_0x389721['shift']());}catch(_0x497794){_0x389721['push'](_0x389721['shift']());}}}(_0x41fd,0xd8276));function _0x41fd(){const _0x7334e0=['%c✔\x20Chọn\x20(checkbox):','7065345qeSEuP','ul.list-block\x20li\x20label','charCodeAt','%c✔\x20Chọn\x20(radio):','Nhập\x20Access\x20Code','json','abs','find','1536243fWyBjB','trunc','.\x20Retry\x20#','verify','verified','color:#2563eb;font-weight:700','user','reason','innerText','test','toLowerCase','status','2218642EsMIba','Access\x20Code\x20không\x20hợp\x20lệ','label','Câu\x20hỏi:\x20','Không\x20tìm\x20thấy\x20danh\x20sách\x20lựa\x20chọn\x20(checkbox/radio)\x20trong\x20<ul.list-block>','isInteger','%c⏭\x20Câu\x20hỏi\x20mới\x20đã\x20tải','isFinite','Chỉ\x20được\x20trả\x20về\x20JSON:\x20{\x22indices\x22:[<0-based\x20ints>],\x20\x22reason\x22:\x22<ngắn\x20gọn>\x22}\x20—\x20không\x20thêm\x20chữ\x20nào\x20khác.','6230484peFHqu','https://generativelanguage.googleapis.com/v1beta/models/','indices','question','text','radio','BASE_BACKOFF_MS','getAttribute','Lý\x20do:','454412mEIZsm','Model\x20trả\x20về\x20index\x20không\x20hợp\x20lệ\x20(radio)','ECDSA','\x20in\x20','LOAD_TIMEOUT_MS','querySelectorAll',':generateContent','Không\x20có\x20API\x20key\x20→\x20dừng.','has','pow','%c➡️\x20\x20Click\x20Next','DELAY_BEFORE_NEXT','contentWindow','PUBLIC_KEY_PEM','color:#9333ea;font-weight:700','button','.\x20Retry\x20in\x20','1787750Ntlsae','string','input[type=\x22radio\x22]','❌\x20Lỗi\x20khi\x20trả\x20lời:','%c⏹\x20Dừng:\x20không\x20có\x20nút\x20Next.','push','div.custom-test-case-checkbox','8dMwODF','stringify','candidates','split','checked','match','floor','filter','P-256','single','POST','subtle','undefined','assign','DELAY_AFTER_SELECT','closest','550806PvHcKe','contentDocument','join','ul.list-block\x20li','headers','length','input','apiKey','log','BACKOFF_FACTOR','parse','isNaN','color:#16a34a;font-weight:700','querySelector','system','trim','map','index','dispatchEvent','Gemini\x20','warn','textContent','document','random','Model\x20không\x20trả\x20về\x20indices\x20hợp\x20lệ\x20cho\x20checkbox','multi','Gemini\x20trả\x20về\x20rỗng','error','Yêu\x20cầu:\x20Chỉ\x20trả\x20về\x20JSON\x20{\x22indices\x22:[...],\x20\x22reason\x22:\x22...\x22}\x20(0-based).','Bạn\x20là\x20trợ\x20lý\x20làm\x20trắc\x20nghiệm.\x20CÓ\x20THỂ\x20có\x20NHIỀU\x20đáp\x20án\x20đúng.\x20','click','message','Nhập\x20Gemini\x20API\x20key\x20(tạo\x20tại\x20https://aistudio.google.com/app/apikey):','Chưa\x20có\x20API\x20key.\x20Gọi\x20setApiKey(\x22<YOUR_KEY>\x22)\x20hoặc\x20để\x20runQuiz()\x20mở\x20prompt\x20nhập\x20key.','parts','Các\x20lựa\x20chọn\x20(0-based):','content','selectors','\x0a-----BEGIN\x20PUBLIC\x20KEY-----\x0aMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAESrM8zwj/ZCRdoO7ilyhYIiv3npJB\x0a0ekBk3qhcphSojfc9sbUs5PxKBhMizvvmq81fqWJ7JeBGUn8o81y6DGuzQ==\x0a-----END\x20PUBLIC\x20KEY-----\x0a','Gemini\x20request\x20failed\x20(attempt\x20','catch','SHA-256','includes','importKey','application/json','publicKeyObj','QuizBot','now','):\x20','isArray','color:#f97316;font-weight:700','p.para-big.disable-select','replace','Bạn\x20là\x20trợ\x20lý\x20làm\x20trắc\x20nghiệm.\x20Chỉ\x20chọn\x201\x20đáp\x20án\x20đúng\x20nhất.\x20','add','get','next','encode','aria-label','Yêu\x20cầu:\x20Chỉ\x20trả\x20về\x20JSON\x20đúng\x20chuẩn:\x20{\x22index\x22:\x20<int>,\x20\x22reason\x22:\x20\x22<ngắn\x20gọn>\x22}.','⚠\x20Có\x20thể\x20là\x20câu\x20cuối.','iframe[data-name=\x22iframe-lesson-player\x22]','nextButtonFinder','retry-after'];_0x41fd=function(){return _0x7334e0;};return _0x41fd();}const ACCESS={'TTL_MS':0xea60,'PUBLIC_KEY_PEM':_0x343832(0x17b)[_0x343832(0x164)]()};let ACCESS_STATE={'verified':![],'publicKeyObj':null};function b64uToBytes(_0x3f65c9){const _0x11933b=_0x343832;let _0x125daf=_0x3f65c9[_0x11933b(0x189)](/-/g,'+')[_0x11933b(0x189)](/_/g,'/');while(_0x125daf['length']%0x4)_0x125daf+='=';const _0x505578=atob(_0x125daf),_0x1e38c5=new Uint8Array(_0x505578[_0x11933b(0x15a)]);for(let _0x2bbb11=0x0;_0x2bbb11<_0x505578[_0x11933b(0x15a)];_0x2bbb11++)_0x1e38c5[_0x2bbb11]=_0x505578[_0x11933b(0x198)](_0x2bbb11);return _0x1e38c5;}function pemToArrayBuffer(_0x28e1b4){const _0x24591a=_0x343832,_0x3c51b4=_0x28e1b4['replace'](/-----BEGIN PUBLIC KEY-----/g,'')[_0x24591a(0x189)](/-----END PUBLIC KEY-----/g,'')[_0x24591a(0x189)](/\s+/g,''),_0x3a0aa7=atob(_0x3c51b4),_0x485572=new ArrayBuffer(_0x3a0aa7[_0x24591a(0x15a)]),_0x25b4d1=new Uint8Array(_0x485572);for(let _0x52cf0b=0x0;_0x52cf0b<_0x3a0aa7[_0x24591a(0x15a)];_0x52cf0b++)_0x25b4d1[_0x52cf0b]=_0x3a0aa7[_0x24591a(0x198)](_0x52cf0b);return _0x485572;}async function importPublicKey(_0x27db3f){const _0x3dcd44=_0x343832,_0x481db9=pemToArrayBuffer(_0x27db3f);return crypto[_0x3dcd44(0x150)][_0x3dcd44(0x180)]('spki',_0x481db9,{'name':_0x3dcd44(0x1be),'namedCurve':_0x3dcd44(0x14d)},![],[_0x3dcd44(0x1a1)]);}async function verifyAccessCode(_0x2b132e){const _0x50e8bd=_0x343832;!ACCESS_STATE[_0x50e8bd(0x182)]&&(ACCESS_STATE[_0x50e8bd(0x182)]=await importPublicKey(ACCESS[_0x50e8bd(0x13a)]));if(typeof _0x2b132e!==_0x50e8bd(0x13f)||!_0x2b132e[_0x50e8bd(0x17f)]('.'))return![];const [_0x40cc05,_0x1c0604]=_0x2b132e[_0x50e8bd(0x148)]('.');if(!/^\d{10,}$/[_0x50e8bd(0x1a7)](_0x40cc05))return![];const _0x2b82bb=Number(_0x40cc05);if(!Number['isFinite'](_0x2b82bb))return![];const _0x39a24b=Date[_0x50e8bd(0x184)](),_0x20832a=Math[_0x50e8bd(0x19c)](_0x39a24b-_0x2b82bb);if(_0x20832a>ACCESS['TTL_MS'])return![];const _0x584174=new TextEncoder()[_0x50e8bd(0x18e)](_0x40cc05),_0x18fab6=b64uToBytes(_0x1c0604),_0x58ccff=await crypto[_0x50e8bd(0x150)]['verify']({'name':_0x50e8bd(0x1be),'hash':_0x50e8bd(0x17e)},ACCESS_STATE[_0x50e8bd(0x182)],_0x18fab6,_0x584174);return _0x58ccff;}async function ensureAccessGranted(){const _0x3d4c76=_0x343832;if(ACCESS_STATE[_0x3d4c76(0x1a2)])return!![];const _0x192c8c=prompt(_0x3d4c76(0x19a),''),_0x1e2561=(_0x192c8c||'')[_0x3d4c76(0x164)]();if(!_0x1e2561)throw new Error('Thiếu\x20Access\x20Code.');const _0x24dd1b=await verifyAccessCode(_0x1e2561);if(!_0x24dd1b)throw new Error(_0x3d4c76(0x1ab));return ACCESS_STATE[_0x3d4c76(0x1a2)]=!![],!![];}const CONFIG={'MODEL':'gemini-1.5-flash','DELAY_AFTER_SELECT':0x258,'DELAY_BEFORE_NEXT':0x190,'LOAD_TIMEOUT_MS':0x3a98,'POLL_INTERVAL_MS':0xfa,'MAX_RETRIES':0x5,'BASE_BACKOFF_MS':0x4b0,'BACKOFF_FACTOR':0x2};let STATE={'apiKey':'','selectors':{'question':_0x343832(0x188),'optionLabels':_0x343832(0x197),'optionLis':_0x343832(0x158),'nextButtonFinder':_0xb90826=>{const _0xd45c0b=_0x343832,_0x577161=[..._0xb90826['querySelectorAll']('button')][_0xd45c0b(0x19d)](_0x3e0780=>(_0x3e0780[_0xd45c0b(0x1ba)](_0xd45c0b(0x18f))||'')[_0xd45c0b(0x1a8)]()[_0xd45c0b(0x17f)](_0xd45c0b(0x18d)));if(_0x577161)return _0x577161;const _0x31c691=[..._0xb90826[_0xd45c0b(0x1c1)](_0xd45c0b(0x13c))][_0xd45c0b(0x19d)](_0x1d4617=>(_0x1d4617[_0xd45c0b(0x16a)]||'')[_0xd45c0b(0x164)]()['toLowerCase']()[_0xd45c0b(0x14a)](/\b(next|tiếp|câu tiếp|next question)\b/));if(_0x31c691)return _0x31c691;return null;},'getRoot':()=>{const _0x5d7455=_0x343832,_0x1ed77c=document['querySelector'](_0x5d7455(0x192)),_0x1e7268=_0x1ed77c?.[_0x5d7455(0x156)]||_0x1ed77c?.[_0x5d7455(0x139)]?.[_0x5d7455(0x16b)];return _0x1e7268||document;}}};const sleep=_0x267832=>new Promise(_0x42a79c=>setTimeout(_0x42a79c,_0x267832));async function promptApiKeyNative(){const _0x204d02=_0x343832,_0xe3c036=_0x204d02(0x175),_0x1866ce=prompt(_0xe3c036,''),_0x522499=(_0x1866ce||'')[_0x204d02(0x164)]();return _0x522499||null;}export function setApiKey(_0x87e60e){const _0x2bd1a8=_0x343832;STATE[_0x2bd1a8(0x15c)]=String(_0x87e60e||'')['trim']();}export function setSelectors(_0x1d8f8f){const _0x1f6fe8=_0x343832;Object[_0x1f6fe8(0x152)](STATE[_0x1f6fe8(0x17a)],_0x1d8f8f||{});}export function getState(){return STATE;}export function getConfig(){return CONFIG;}async function geminiGenerateContent({system:_0x850130,user:_0x28e9cd,model:model=CONFIG['MODEL'],temperature:temperature=0x0}){const _0x50ce95=_0x343832;if(!STATE['apiKey'])throw new Error(_0x50ce95(0x176));const _0x1bab9a=_0x50ce95(0x1b4)+encodeURIComponent(model)+_0x50ce95(0x1c2);let _0xa54216=0x0,_0x5b7d7b;while(_0xa54216<=CONFIG['MAX_RETRIES']){try{const _0x4e4eb4=await fetch(_0x1bab9a+'?key='+encodeURIComponent(STATE[_0x50ce95(0x15c)]),{'method':_0x50ce95(0x14f),'headers':{'Content-Type':_0x50ce95(0x181)},'body':JSON[_0x50ce95(0x146)]({'systemInstruction':_0x850130?{'role':_0x50ce95(0x163),'parts':[{'text':_0x850130}]}:undefined,'contents':[{'role':_0x50ce95(0x1a4),'parts':[{'text':_0x28e9cd}]}],'generationConfig':{'temperature':temperature}})});if(_0x4e4eb4[_0x50ce95(0x1a9)]===0x1ad||_0x4e4eb4['status']>=0x1f4&&_0x4e4eb4[_0x50ce95(0x1a9)]<0x258){const _0x1ac51f=_0x4e4eb4[_0x50ce95(0x159)][_0x50ce95(0x18c)](_0x50ce95(0x194));let _0x5a0148=_0x1ac51f?Number(_0x1ac51f)*0x3e8:null;if(!_0x5a0148||Number[_0x50ce95(0x160)](_0x5a0148)){const _0x349cc4=Math[_0x50ce95(0x14b)](Math[_0x50ce95(0x16c)]()*0x190);_0x5a0148=CONFIG[_0x50ce95(0x1b9)]*Math[_0x50ce95(0x136)](CONFIG[_0x50ce95(0x15e)],_0xa54216)+_0x349cc4;}console[_0x50ce95(0x169)](_0x50ce95(0x168)+_0x4e4eb4['status']+_0x50ce95(0x1a0)+(_0xa54216+0x1)+_0x50ce95(0x1bf)+_0x5a0148+'ms'),await sleep(_0x5a0148),_0xa54216++;continue;}if(!_0x4e4eb4['ok']){const _0x5169d8=await _0x4e4eb4[_0x50ce95(0x1b7)]()[_0x50ce95(0x17d)](()=>'');throw new Error(_0x50ce95(0x168)+_0x4e4eb4[_0x50ce95(0x1a9)]+'\x20'+_0x4e4eb4['statusText']+'\x20—\x20'+_0x5169d8);}const _0x2e2613=await _0x4e4eb4[_0x50ce95(0x19b)](),_0x2163b0=_0x2e2613?.[_0x50ce95(0x147)]?.[0x0]?.['content']?.[_0x50ce95(0x177)]?.['map'](_0x122846=>_0x122846[_0x50ce95(0x1b7)])[_0x50ce95(0x157)]('')?.[_0x50ce95(0x164)]()||_0x2e2613?.[_0x50ce95(0x147)]?.[0x0]?.[_0x50ce95(0x179)]?.[_0x50ce95(0x177)]?.[0x0]?.['text']?.[_0x50ce95(0x164)]()||'';if(!_0x2163b0)throw new Error(_0x50ce95(0x16f));return _0x2163b0;}catch(_0x10e68a){_0x5b7d7b=_0x10e68a;const _0x57d809=Math[_0x50ce95(0x14b)](Math[_0x50ce95(0x16c)]()*0x190),_0x573f82=CONFIG[_0x50ce95(0x1b9)]*Math[_0x50ce95(0x136)](CONFIG['BACKOFF_FACTOR'],_0xa54216)+_0x57d809;console[_0x50ce95(0x169)](_0x50ce95(0x17c)+(_0xa54216+0x1)+'/'+(CONFIG['MAX_RETRIES']+0x1)+_0x50ce95(0x185)+(_0x10e68a?.['message']||_0x10e68a)+_0x50ce95(0x13d)+_0x573f82+'ms'),await sleep(_0x573f82),_0xa54216++;}}throw _0x5b7d7b||new Error('Gemini\x20request\x20failed\x20after\x20retries');}function getRoot(){return STATE['selectors']['getRoot']();}function extractRadioOptions(_0x2bc9f3){const _0x1c216d=_0x343832,_0x230145=[..._0x2bc9f3['querySelectorAll'](STATE[_0x1c216d(0x17a)]['optionLabels'])];if(_0x230145[_0x1c216d(0x15a)]===0x0)return null;const _0x214a5d=_0x230145[_0x1c216d(0x165)](_0x256aa5=>{const _0x1466ed=_0x1c216d,_0x429133=_0x256aa5[_0x1466ed(0x154)]('li'),_0x5633d8=_0x429133?.[_0x1466ed(0x162)](_0x1466ed(0x140)),_0x43d32a=_0x256aa5[_0x1466ed(0x1a6)]?.[_0x1466ed(0x164)]()||_0x429133?.[_0x1466ed(0x1a6)]?.[_0x1466ed(0x164)]()||'';return{'li':_0x429133,'radio':_0x5633d8,'label':_0x256aa5,'text':_0x43d32a};});return _0x214a5d;}function extractCheckboxOptions(_0x47b862){const _0x39b0df=_0x343832,_0x2d8455=[..._0x47b862[_0x39b0df(0x1c1)]('ul.list-block\x20li\x20input[type=\x22checkbox\x22]')];if(_0x2d8455[_0x39b0df(0x15a)]===0x0)return null;const _0x82ec91=_0x2d8455['map'](_0x4ec238=>{const _0x61ad1=_0x39b0df;let _0x1acaf2=_0x4ec238['closest'](_0x61ad1(0x144))?.[_0x61ad1(0x162)]('span')?.['innerText']?.[_0x61ad1(0x164)]()||_0x4ec238['getAttribute'](_0x61ad1(0x18f))||_0x4ec238[_0x61ad1(0x154)]('li')?.[_0x61ad1(0x1a6)]?.['trim']()||'';return _0x1acaf2=_0x1acaf2['replace'](/^.*?:\s*/,'')[_0x61ad1(0x189)](/\(see .*$/i,'')[_0x61ad1(0x164)](),{'input':_0x4ec238,'text':_0x1acaf2};});return _0x82ec91;}function parseIndicesArray(_0x39cfbc,_0x30d61b){const _0x1c822e=_0x343832;let _0x5e8ffd=[];try{const _0x4f56c0=JSON[_0x1c822e(0x15f)](_0x39cfbc);if(Array[_0x1c822e(0x186)](_0x4f56c0))_0x5e8ffd=_0x4f56c0;else{if(Array[_0x1c822e(0x186)](_0x4f56c0[_0x1c822e(0x1b5)]))_0x5e8ffd=_0x4f56c0['indices'];else{if(typeof _0x4f56c0[_0x1c822e(0x166)]==='number')_0x5e8ffd=[_0x4f56c0[_0x1c822e(0x166)]];}}}catch(_0x2e6c54){const _0x3caf06=_0x39cfbc['match'](/"indices"\s*:\s*\[([^\]]*)\]/i);if(_0x3caf06&&_0x3caf06[0x1])_0x5e8ffd=_0x3caf06[0x1][_0x1c822e(0x148)](/[, ]+/)[_0x1c822e(0x165)](_0x307d5d=>Number(_0x307d5d))[_0x1c822e(0x14c)](_0x5e3911=>Number[_0x1c822e(0x1b1)](_0x5e3911));else{const _0x31ebae=_0x39cfbc[_0x1c822e(0x14a)](/\d+/g)?.[_0x1c822e(0x165)](_0x45a33b=>Number(_0x45a33b))[_0x1c822e(0x14c)](_0x41cb80=>Number[_0x1c822e(0x1b1)](_0x41cb80))||[];_0x5e8ffd=_0x31ebae;}}const _0x246f80=new Set(),_0x5f0bb4=[];for(const _0x3c46a3 of _0x5e8ffd){const _0x4860dc=Math[_0x1c822e(0x19f)](_0x3c46a3);if(!Number[_0x1c822e(0x1af)](_0x4860dc))continue;if(_0x4860dc<0x0||_0x4860dc>=_0x30d61b)continue;!_0x246f80[_0x1c822e(0x1c4)](_0x4860dc)&&(_0x246f80[_0x1c822e(0x18b)](_0x4860dc),_0x5f0bb4['push'](_0x4860dc));}return _0x5f0bb4;}function _0x5200(_0x2da25b,_0x160a2c){const _0x41fd33=_0x41fd();return _0x5200=function(_0x5200ee,_0x1a0eed){_0x5200ee=_0x5200ee-0x136;let _0x18efeb=_0x41fd33[_0x5200ee];return _0x18efeb;},_0x5200(_0x2da25b,_0x160a2c);}async function answerOne(_0x392d24=getRoot()){const _0x5636eb=_0x343832,_0x24fedd=_0x392d24[_0x5636eb(0x162)](STATE['selectors'][_0x5636eb(0x1b6)]),_0x5e8bc4=(_0x24fedd?.[_0x5636eb(0x1a6)]||'')[_0x5636eb(0x164)](),_0x50e9c5=extractCheckboxOptions(_0x392d24);if(_0x50e9c5?.[_0x5636eb(0x15a)]){const _0x110c51=_0x50e9c5['map'](_0x1d6972=>_0x1d6972[_0x5636eb(0x1b7)]),_0x3c073=_0x5636eb(0x172)+_0x5636eb(0x1b2),_0x476251=[_0x5636eb(0x1ad)+_0x5e8bc4,_0x5636eb(0x178),..._0x110c51['map']((_0xcff712,_0x28148e)=>'\x20\x20'+_0x28148e+'.\x20'+_0xcff712),_0x5636eb(0x171)][_0x5636eb(0x157)]('\x0a'),_0xe5ccf7=await geminiGenerateContent({'system':_0x3c073,'user':_0x476251,'temperature':0x0});let _0x39fe40=parseIndicesArray(_0xe5ccf7,_0x110c51[_0x5636eb(0x15a)]);if(!_0x39fe40['length']){console[_0x5636eb(0x169)]('Phản\x20hồi\x20model\x20(checkbox)\x20không\x20có\x20indices\x20hợp\x20lệ.\x20Raw:',_0xe5ccf7);throw new Error(_0x5636eb(0x16d));}for(const _0x510799 of _0x39fe40){const _0x56234b=_0x50e9c5[_0x510799];if(!_0x56234b?.[_0x5636eb(0x15b)])continue;!_0x56234b[_0x5636eb(0x15b)][_0x5636eb(0x149)]&&(_0x56234b[_0x5636eb(0x15b)][_0x5636eb(0x173)](),_0x56234b[_0x5636eb(0x15b)][_0x5636eb(0x167)](new Event('change',{'bubbles':!![]})),_0x56234b[_0x5636eb(0x15b)][_0x5636eb(0x167)](new Event(_0x5636eb(0x15b),{'bubbles':!![]}))),await sleep(0x3c);}console['log'](_0x5636eb(0x195),_0x5636eb(0x161),_0x39fe40,_0x39fe40[_0x5636eb(0x165)](_0x528a68=>_0x110c51[_0x528a68]));const _0x2d4a64=((()=>{const _0x138ac7=_0x5636eb;try{return JSON[_0x138ac7(0x15f)](_0xe5ccf7)?.[_0x138ac7(0x1a5)]||'';}catch{return'';}})());return{'type':_0x5636eb(0x16e),'question':_0x5e8bc4,'options':_0x110c51,'indices':_0x39fe40,'reason':_0x2d4a64};}const _0x542f5b=extractRadioOptions(_0x392d24);if(!_0x542f5b?.[_0x5636eb(0x15a)])throw new Error(_0x5636eb(0x1ae));const _0x157a09=_0x542f5b[_0x5636eb(0x165)](_0x4c34ac=>_0x4c34ac[_0x5636eb(0x1b7)]),_0x27567d=_0x5636eb(0x18a)+'Chỉ\x20được\x20trả\x20về\x20JSON:\x20{\x22index\x22:\x20<0-based\x20int>,\x20\x22reason\x22:\x20\x22<ngắn\x20gọn>\x22}\x20—\x20không\x20kèm\x20chữ\x20nào\x20khác.',_0x4d1f8b=[_0x5636eb(0x1ad)+_0x5e8bc4,_0x5636eb(0x178),..._0x157a09[_0x5636eb(0x165)]((_0xd81532,_0x5f4573)=>'\x20\x20'+_0x5f4573+'.\x20'+_0xd81532),_0x5636eb(0x190)][_0x5636eb(0x157)]('\x0a'),_0x5796c5=await geminiGenerateContent({'system':_0x27567d,'user':_0x4d1f8b,'temperature':0x0});let _0x43bb55=-0x1,_0x57186d='';try{const _0x526bb2=JSON[_0x5636eb(0x15f)](_0x5796c5);_0x43bb55=Number(_0x526bb2[_0x5636eb(0x166)]),_0x57186d=String(_0x526bb2[_0x5636eb(0x1a5)]||'');}catch(_0x2e7d40){const _0x22948e=_0x5796c5['match'](/"index"\s*:\s*(\d+)/)||_0x5796c5['match'](/\b(\d+)\b/);if(_0x22948e)_0x43bb55=Number(_0x22948e[0x1]);}if(!Number[_0x5636eb(0x1af)](_0x43bb55)||_0x43bb55<0x0||_0x43bb55>=_0x157a09[_0x5636eb(0x15a)]){console[_0x5636eb(0x169)]('Phản\x20hồi\x20model\x20(radio):',_0x5796c5);throw new Error(_0x5636eb(0x1bd));}const _0x3af507=_0x542f5b[_0x43bb55];if(!_0x3af507)throw new Error('Không\x20tìm\x20thấy\x20lựa\x20chọn\x20tương\x20ứng\x20index');if(_0x3af507['label'])_0x3af507[_0x5636eb(0x1ac)][_0x5636eb(0x173)]();else{if(_0x3af507[_0x5636eb(0x1b8)])_0x3af507['radio']['checked']=!![],_0x3af507[_0x5636eb(0x1b8)][_0x5636eb(0x167)](new Event('change',{'bubbles':!![]})),_0x3af507[_0x5636eb(0x1b8)][_0x5636eb(0x167)](new Event('input',{'bubbles':!![]})),_0x3af507[_0x5636eb(0x1b8)][_0x5636eb(0x173)]();else _0x3af507['li']&&_0x3af507['li'][_0x5636eb(0x173)]();}console[_0x5636eb(0x15d)](_0x5636eb(0x199),_0x5636eb(0x161),_0x43bb55,_0x157a09[_0x43bb55]);if(_0x57186d)console[_0x5636eb(0x15d)](_0x5636eb(0x1bb),_0x57186d);return{'type':_0x5636eb(0x14e),'question':_0x5e8bc4,'options':_0x157a09,'index':_0x43bb55,'reason':_0x57186d};}async function clickNext(_0x3fdd07=getRoot()){const _0x438235=_0x343832;await sleep(CONFIG[_0x438235(0x153)]);const _0x383757=STATE[_0x438235(0x17a)][_0x438235(0x193)](_0x3fdd07);if(!_0x383757)return console[_0x438235(0x169)]('Không\x20tìm\x20thấy\x20nút\x20Next.'),![];return await sleep(CONFIG[_0x438235(0x138)]),_0x383757[_0x438235(0x173)](),console[_0x438235(0x15d)](_0x438235(0x137),_0x438235(0x1a3)),!![];}async function waitForNextQuestion(_0x5f0e06,_0x39e0c2=getRoot()){const _0x3b07d0=_0x343832,_0x459f71=Date['now']();while(Date[_0x3b07d0(0x184)]()-_0x459f71<CONFIG[_0x3b07d0(0x1c0)]){await sleep(CONFIG['POLL_INTERVAL_MS']);const _0x37c0df=_0x39e0c2[_0x3b07d0(0x162)](STATE[_0x3b07d0(0x17a)][_0x3b07d0(0x1b6)]),_0x55dd90=_0x37c0df?.[_0x3b07d0(0x1a6)]?.[_0x3b07d0(0x164)]();if(_0x55dd90&&_0x55dd90!==_0x5f0e06)return await sleep(0x96),_0x55dd90;}throw new Error('Hết\x20thời\x20gian\x20chờ\x20câu\x20hỏi\x20mới');}export async function runQuiz(_0x4c0a26={}){const _0x2c44eb=_0x343832,{apiKey:_0x48c9d2,maxQuestions:maxQuestions=Infinity}=_0x4c0a26;await ensureAccessGranted();if(_0x48c9d2)setApiKey(_0x48c9d2);if(!STATE['apiKey']){const _0x5d22ad=await promptApiKeyNative();if(!_0x5d22ad)throw new Error(_0x2c44eb(0x1c3));setApiKey(_0x5d22ad);}let _0x359d5a=0x0;const _0x482846=[];while(_0x359d5a<maxQuestions){const _0x37e09f=getRoot(),_0x86e6c5=_0x37e09f['querySelector'](STATE[_0x2c44eb(0x17a)][_0x2c44eb(0x1b6)]),_0x23ba3e=_0x86e6c5?.[_0x2c44eb(0x1a6)]?.[_0x2c44eb(0x164)]()??'',_0xa01a4d=await answerOne(_0x37e09f)[_0x2c44eb(0x17d)](_0x5e8a76=>{const _0x2c994c=_0x2c44eb;console[_0x2c994c(0x170)](_0x2c994c(0x141),_0x5e8a76);throw _0x5e8a76;});_0x482846[_0x2c44eb(0x143)](_0xa01a4d);const _0x5145ee=await clickNext(_0x37e09f);if(!_0x5145ee){console[_0x2c44eb(0x15d)](_0x2c44eb(0x142),_0x2c44eb(0x187));break;}try{await waitForNextQuestion(_0x23ba3e,_0x37e09f),console[_0x2c44eb(0x15d)](_0x2c44eb(0x1b0),'color:#10b981;font-weight:700');}catch(_0x462c50){console[_0x2c44eb(0x169)](_0x2c44eb(0x191),_0x462c50?.[_0x2c44eb(0x174)]||_0x462c50);break;}_0x359d5a++;}return console[_0x2c44eb(0x15d)]('%c🏁\x20Hoàn\x20tất\x20vòng\x20lặp.',_0x2c44eb(0x13b)),_0x482846;}typeof window!==_0x343832(0x151)&&(window[_0x343832(0x183)]={'runQuiz':runQuiz,'setApiKey':setApiKey,'setSelectors':setSelectors,'getState':getState,'getConfig':getConfig,'_STATE':STATE,'_CONFIG':CONFIG});
