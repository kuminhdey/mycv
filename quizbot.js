const _0x27c232=_0x4ee1;(function(_0x3338c4,_0x342d57){const _0x40b920=_0x4ee1,_0x267cae=_0x3338c4();while(!![]){try{const _0x4f0ef6=-parseInt(_0x40b920(0x1f6))/0x1+-parseInt(_0x40b920(0x1d3))/0x2+-parseInt(_0x40b920(0x20f))/0x3+parseInt(_0x40b920(0x1da))/0x4+-parseInt(_0x40b920(0x201))/0x5*(parseInt(_0x40b920(0x1f2))/0x6)+-parseInt(_0x40b920(0x21b))/0x7*(-parseInt(_0x40b920(0x208))/0x8)+parseInt(_0x40b920(0x21f))/0x9;if(_0x4f0ef6===_0x342d57)break;else _0x267cae['push'](_0x267cae['shift']());}catch(_0x5bd75c){_0x267cae['push'](_0x267cae['shift']());}}}(_0x2ed0,0xd9402));const CONFIG={'MODEL':'gemini-1.5-flash','DELAY_AFTER_SELECT':0x258,'DELAY_BEFORE_NEXT':0x190,'LOAD_TIMEOUT_MS':0x3a98,'POLL_INTERVAL_MS':0xfa,'MAX_RETRIES':0x5,'BASE_BACKOFF_MS':0x4b0,'BACKOFF_FACTOR':0x2};function _0x2ed0(){const _0x51ff51=['color:#10b981;font-weight:700','Gemini\x20','ul.list-block\x20li\x20label','stringify','%c‚û°Ô∏è\x20\x20Click\x20Next\x20Question','toLowerCase','QuizBot','now','B·∫°n\x20l√†\x20tr·ª£\x20l√Ω\x20l√†m\x20tr·∫Øc\x20nghi·ªám.\x20Ch·ªâ\x20ch·ªçn\x201\x20ƒë√°p\x20√°n\x20ƒë√∫ng\x20nh·∫•t.\x20','join','1347888gChEDD','Nh·∫≠p\x20GEMINI_API_KEY\x20(s·∫Ω\x20ch·ªâ\x20gi·ªØ\x20trong\x20b·ªô\x20nh·ªõ\x20t·∫°m\x20c·ªßa\x20trang):','reason','parts','BASE_BACKOFF_MS','undefined','querySelector','4558732koWEkb','C√°c\x20l·ª±a\x20ch·ªçn\x20(0-based):','isInteger','label','H·∫øt\x20th·ªùi\x20gian\x20ch·ªù\x20c√¢u\x20h·ªèi\x20m·ªõi','application/json','length','isNaN','map','warn','random','text','Kh√¥ng\x20t√¨m\x20th·∫•y\x20danh\x20s√°ch\x20l·ª±a\x20ch·ªçn:\x20','aria-label','color:#9333ea;font-weight:700','statusText','Model\x20tr·∫£\x20v·ªÅ\x20index\x20kh√¥ng\x20h·ª£p\x20l·ªá','next\x20question','Ch∆∞a\x20c√≥\x20API\x20key.\x20G·ªçi\x20setApiKey(\x22<YOUR_KEY>\x22)\x20ho·∫∑c\x20truy·ªÅn\x20apiKey\x20khi\x20runQuiz().','DELAY_BEFORE_NEXT','Kh√¥ng\x20t√¨m\x20th·∫•y\x20<li>\x20t∆∞∆°ng\x20·ª©ng\x20v·ªõi\x20index','POLL_INTERVAL_MS','input','%c‚èπ\x20D·ª´ng:\x20kh√¥ng\x20c√≥\x20n√∫t\x20Next.','288lcXpKW','includes','candidates','getRoot','221958rDcmuI',':generateContent','contentWindow','index','selectors','Kh√¥ng\x20t√¨m\x20th·∫•y\x20input\x20radio\x20trong\x20l·ª±a\x20ch·ªçn','optionLabels','‚ùå\x20L·ªói\x20khi\x20tr·∫£\x20l·ªùi:','Y√™u\x20c·∫ßu:\x20Ch·ªâ\x20tr·∫£\x20v·ªÅ\x20JSON\x20ƒë√∫ng\x20chu·∫©n:\x20{\x22index\x22:\x20<int>,\x20\x22reason\x22:\x20\x22<ng·∫Øn\x20g·ªçn>\x22}.','L√Ω\x20do:','Kh√¥ng\x20t√¨m\x20th·∫•y\x20th·∫ª\x20c√¢u\x20h·ªèi:\x20','169355DrinvR','input[type=\x22radio\x22]','assign','color:#16a34a;font-weight:700','nextButtonFinder','DELAY_AFTER_SELECT','document','1752SsBzia','click','p.para-big.disable-select','.\x20Retry\x20in\x20','message','trim','%cüèÅ\x20Ho√†n\x20t·∫•t\x20v√≤ng\x20l·∫∑p.','3458367mSxNTX','user','apiKey','Kh√¥ng\x20t√¨m\x20th·∫•y\x20n√∫t\x20Next\x20Question.','Ch·ªâ\x20ƒë∆∞·ª£c\x20tr·∫£\x20v·ªÅ\x20JSON:\x20{\x22index\x22:\x20<0-based\x20int>,\x20\x22reason\x22:\x20\x22<ng·∫Øn\x20g·ªçn>\x22}\x20‚Äî\x20kh√¥ng\x20k√®m\x20ch·ªØ\x20n√†o\x20kh√°c.','MAX_RETRIES','%c‚úî\x20Ch·ªçn:','Gemini\x20tr·∫£\x20v·ªÅ\x20r·ªóng','button','\x20‚Äî\x20','‚ö†\x20C√≥\x20th·ªÉ\x20l√†\x20c√¢u\x20cu·ªëi.','find','6748BRQNGx','%c‚è≠\x20C√¢u\x20h·ªèi\x20m·ªõi\x20ƒë√£\x20t·∫£i','https://generativelanguage.googleapis.com/v1beta/models/','):\x20','28922022uYHLzt','innerText','status','floor','getAttribute','optionLis','MODEL','ul.list-block\x20li','BACKOFF_FACTOR','headers','.\x20Retry\x20#','color:#f97316;font-weight:700','querySelectorAll','catch','color:#2563eb;font-weight:700','error','Ph·∫£n\x20h·ªìi\x20model:','log','pow','change','question','content','Gemini\x20request\x20failed\x20(attempt\x20','?key=','parse'];_0x2ed0=function(){return _0x51ff51;};return _0x2ed0();}let STATE={'apiKey':'','selectors':{'question':_0x27c232(0x20a),'optionLabels':_0x27c232(0x23a),'optionLis':_0x27c232(0x226),'nextButtonFinder':_0x185fbf=>[..._0x185fbf[_0x27c232(0x22b)](_0x27c232(0x217))][_0x27c232(0x21a)](_0x2963f5=>(_0x2963f5[_0x27c232(0x223)](_0x27c232(0x1e7))||'')[_0x27c232(0x23d)]()[_0x27c232(0x1f3)](_0x27c232(0x1eb))),'getRoot':()=>{const _0x232784=_0x27c232,_0x5daa08=document[_0x232784(0x1d9)]('iframe[data-name=\x22iframe-lesson-player\x22]'),_0x2f12aa=_0x5daa08?.['contentDocument']||_0x5daa08?.[_0x232784(0x1f8)]?.[_0x232784(0x207)];return _0x2f12aa||document;}}};const sleep=_0x453cc7=>new Promise(_0x35bfbe=>setTimeout(_0x35bfbe,_0x453cc7));export function setApiKey(_0x254ba2){const _0x19faa7=_0x27c232;STATE[_0x19faa7(0x211)]=String(_0x254ba2||'')[_0x19faa7(0x20d)]();}export function setSelectors(_0x3ad44f){const _0x522151=_0x27c232;Object[_0x522151(0x203)](STATE[_0x522151(0x1fa)],_0x3ad44f||{});}async function geminiGenerateContent({system:_0x3e67d0,user:_0x3e1697,model:model=CONFIG[_0x27c232(0x225)],temperature:temperature=0x0}){const _0x555a9d=_0x27c232;if(!STATE[_0x555a9d(0x211)])throw new Error(_0x555a9d(0x1ec));const _0x22fd15=_0x555a9d(0x21d)+encodeURIComponent(model)+_0x555a9d(0x1f7);let _0x1505ce=0x0,_0x1a687a;while(_0x1505ce<=CONFIG[_0x555a9d(0x214)]){try{const _0x79ccb6=await fetch(_0x22fd15+_0x555a9d(0x236)+encodeURIComponent(STATE[_0x555a9d(0x211)]),{'method':'POST','headers':{'Content-Type':_0x555a9d(0x1df)},'body':JSON[_0x555a9d(0x23b)]({'systemInstruction':_0x3e67d0?{'role':'system','parts':[{'text':_0x3e67d0}]}:undefined,'contents':[{'role':_0x555a9d(0x210),'parts':[{'text':_0x3e1697}]}],'generationConfig':{'temperature':temperature}})});if(_0x79ccb6[_0x555a9d(0x221)]===0x1ad||_0x79ccb6[_0x555a9d(0x221)]>=0x1f4&&_0x79ccb6[_0x555a9d(0x221)]<0x258){const _0x210f4b=_0x79ccb6[_0x555a9d(0x228)]['get']('retry-after');let _0xd3deb4=_0x210f4b?Number(_0x210f4b)*0x3e8:null;if(!_0xd3deb4||Number[_0x555a9d(0x1e1)](_0xd3deb4)){const _0x561b5e=Math[_0x555a9d(0x222)](Math[_0x555a9d(0x1e4)]()*0x190);_0xd3deb4=CONFIG['BASE_BACKOFF_MS']*Math[_0x555a9d(0x231)](CONFIG[_0x555a9d(0x227)],_0x1505ce)+_0x561b5e;}console['warn']('Gemini\x20'+_0x79ccb6[_0x555a9d(0x221)]+_0x555a9d(0x229)+(_0x1505ce+0x1)+'\x20in\x20'+_0xd3deb4+'ms'),await sleep(_0xd3deb4),_0x1505ce++;continue;}if(!_0x79ccb6['ok']){const _0x2df341=await _0x79ccb6[_0x555a9d(0x1e5)]()[_0x555a9d(0x22c)](()=>'');throw new Error(_0x555a9d(0x239)+_0x79ccb6[_0x555a9d(0x221)]+'\x20'+_0x79ccb6[_0x555a9d(0x1e9)]+_0x555a9d(0x218)+_0x2df341);}const _0x1b7252=await _0x79ccb6['json'](),_0x439f6e=_0x1b7252?.['candidates']?.[0x0]?.[_0x555a9d(0x234)]?.['parts']?.[_0x555a9d(0x1e2)](_0x4407aa=>_0x4407aa[_0x555a9d(0x1e5)])[_0x555a9d(0x1d2)]('')?.[_0x555a9d(0x20d)]()||_0x1b7252?.[_0x555a9d(0x1f4)]?.[0x0]?.[_0x555a9d(0x234)]?.[_0x555a9d(0x1d6)]?.[0x0]?.['text']?.[_0x555a9d(0x20d)]()||'';if(!_0x439f6e)throw new Error(_0x555a9d(0x216));return _0x439f6e;}catch(_0x57933f){_0x1a687a=_0x57933f;const _0x5592e3=Math['floor'](Math[_0x555a9d(0x1e4)]()*0x190),_0xcafc20=CONFIG[_0x555a9d(0x1d7)]*Math[_0x555a9d(0x231)](CONFIG[_0x555a9d(0x227)],_0x1505ce)+_0x5592e3;console[_0x555a9d(0x1e3)](_0x555a9d(0x235)+(_0x1505ce+0x1)+'/'+(CONFIG[_0x555a9d(0x214)]+0x1)+_0x555a9d(0x21e)+(_0x57933f?.[_0x555a9d(0x20c)]||_0x57933f)+_0x555a9d(0x20b)+_0xcafc20+'ms'),await sleep(_0xcafc20),_0x1505ce++;}}throw _0x1a687a||new Error('Gemini\x20request\x20failed\x20after\x20retries');}function getRoot(){const _0x3c5012=_0x27c232;return STATE['selectors'][_0x3c5012(0x1f5)]();}async function answerOne(_0x2cbd45=getRoot()){const _0xbd582a=_0x27c232,_0x3b97ec=_0x2cbd45[_0xbd582a(0x1d9)](STATE[_0xbd582a(0x1fa)]['question']);if(!_0x3b97ec)throw new Error(_0xbd582a(0x200)+STATE[_0xbd582a(0x1fa)][_0xbd582a(0x233)]);const _0xc04e8a=_0x3b97ec['innerText']['trim'](),_0x4f0f5c=[..._0x2cbd45['querySelectorAll'](STATE[_0xbd582a(0x1fa)][_0xbd582a(0x1fc)])];if(_0x4f0f5c[_0xbd582a(0x1e0)]===0x0)throw new Error(_0xbd582a(0x1e6)+STATE[_0xbd582a(0x1fa)][_0xbd582a(0x1fc)]);const _0x187637=_0x4f0f5c['map'](_0x1cc552=>_0x1cc552['innerText']['trim']()),_0x2e5812=_0xbd582a(0x1d1)+_0xbd582a(0x213),_0x33d705=['C√¢u\x20h·ªèi:\x20'+_0xc04e8a,_0xbd582a(0x1db),..._0x187637['map']((_0x422631,_0x13e622)=>'\x20\x20'+_0x13e622+'.\x20'+_0x422631),_0xbd582a(0x1fe)][_0xbd582a(0x1d2)]('\x0a'),_0x42e692=await geminiGenerateContent({'system':_0x2e5812,'user':_0x33d705,'temperature':0x0});let _0x3e3fd1=-0x1,_0x9845e1='';try{const _0x460efe=JSON[_0xbd582a(0x237)](_0x42e692);_0x3e3fd1=Number(_0x460efe[_0xbd582a(0x1f9)]),_0x9845e1=String(_0x460efe[_0xbd582a(0x1d5)]||'');}catch(_0x3dfe9e){const _0x5d66e2=_0x42e692['match'](/"index"\s*:\s*(\d+)/)||_0x42e692['match'](/\b(\d+)\b/);if(_0x5d66e2)_0x3e3fd1=Number(_0x5d66e2[0x1]);}if(!Number[_0xbd582a(0x1dc)](_0x3e3fd1)||_0x3e3fd1<0x0||_0x3e3fd1>=_0x187637[_0xbd582a(0x1e0)]){console[_0xbd582a(0x1e3)](_0xbd582a(0x22f),_0x42e692);throw new Error(_0xbd582a(0x1ea));}const _0x33ba88=[..._0x2cbd45[_0xbd582a(0x22b)](STATE['selectors'][_0xbd582a(0x224)])],_0x524808=_0x33ba88[_0x3e3fd1];if(!_0x524808)throw new Error(_0xbd582a(0x1ee));const _0x1881b8=_0x524808[_0xbd582a(0x1d9)](_0xbd582a(0x202)),_0x37c72f=_0x524808[_0xbd582a(0x1d9)](_0xbd582a(0x1dd));if(_0x37c72f)_0x37c72f[_0xbd582a(0x209)]();else{if(_0x1881b8)_0x1881b8['checked']=!![],_0x1881b8['dispatchEvent'](new Event(_0xbd582a(0x232),{'bubbles':!![]})),_0x1881b8['dispatchEvent'](new Event(_0xbd582a(0x1f0),{'bubbles':!![]})),_0x1881b8['click']();else throw new Error(_0xbd582a(0x1fb));}console[_0xbd582a(0x230)](_0xbd582a(0x215),_0xbd582a(0x204),_0x3e3fd1,_0x187637[_0x3e3fd1]);if(_0x9845e1)console[_0xbd582a(0x230)](_0xbd582a(0x1ff),_0x9845e1);return{'question':_0xc04e8a,'options':_0x187637,'index':_0x3e3fd1,'reason':_0x9845e1};}async function clickNext(_0x3aa975=getRoot()){const _0x2327c3=_0x27c232;await sleep(CONFIG[_0x2327c3(0x206)]);const _0x492454=STATE[_0x2327c3(0x1fa)][_0x2327c3(0x205)](_0x3aa975);if(!_0x492454)return console[_0x2327c3(0x1e3)](_0x2327c3(0x212)),![];return await sleep(CONFIG[_0x2327c3(0x1ed)]),_0x492454[_0x2327c3(0x209)](),console['log'](_0x2327c3(0x23c),_0x2327c3(0x22d)),!![];}async function waitForNextQuestion(_0x5049a1,_0x5e9696=getRoot()){const _0x4e5bae=_0x27c232,_0x4c46dc=Date[_0x4e5bae(0x23f)]();while(Date[_0x4e5bae(0x23f)]()-_0x4c46dc<CONFIG['LOAD_TIMEOUT_MS']){await sleep(CONFIG[_0x4e5bae(0x1ef)]);const _0x101f83=_0x5e9696['querySelector'](STATE[_0x4e5bae(0x1fa)][_0x4e5bae(0x233)]),_0x47818e=_0x101f83?.[_0x4e5bae(0x220)]?.[_0x4e5bae(0x20d)]();if(_0x47818e&&_0x47818e!==_0x5049a1)return await sleep(0x96),_0x47818e;}throw new Error(_0x4e5bae(0x1de));}function _0x4ee1(_0x4ffd72,_0x57a51b){const _0x2ed04b=_0x2ed0();return _0x4ee1=function(_0x4ee134,_0x28daac){_0x4ee134=_0x4ee134-0x1d1;let _0x21cdda=_0x2ed04b[_0x4ee134];return _0x21cdda;},_0x4ee1(_0x4ffd72,_0x57a51b);}export async function runQuiz(_0x259688={}){const _0x367f6a=_0x27c232,{apiKey:_0x1c0e32,maxQuestions:maxQuestions=Infinity}=_0x259688;if(_0x1c0e32)setApiKey(_0x1c0e32);if(!STATE[_0x367f6a(0x211)]){const _0x184049=prompt(_0x367f6a(0x1d4),'');if(!_0x184049)throw new Error('Kh√¥ng\x20c√≥\x20API\x20key\x20‚Üí\x20d·ª´ng.');setApiKey(_0x184049);}let _0x4ef01d=0x0;while(_0x4ef01d<maxQuestions){const _0xd5567a=getRoot(),_0x2a54fa=_0xd5567a[_0x367f6a(0x1d9)](STATE[_0x367f6a(0x1fa)][_0x367f6a(0x233)]),_0xb6de5f=_0x2a54fa?.['innerText']?.[_0x367f6a(0x20d)]()??'';await answerOne(_0xd5567a)[_0x367f6a(0x22c)](_0x4c6a6f=>{const _0x395cd4=_0x367f6a;console[_0x395cd4(0x22e)](_0x395cd4(0x1fd),_0x4c6a6f);throw _0x4c6a6f;});const _0x4e17b2=await clickNext(_0xd5567a);if(!_0x4e17b2){console[_0x367f6a(0x230)](_0x367f6a(0x1f1),_0x367f6a(0x22a));break;}try{await waitForNextQuestion(_0xb6de5f,_0xd5567a),console[_0x367f6a(0x230)](_0x367f6a(0x21c),_0x367f6a(0x238));}catch(_0x31864b){console[_0x367f6a(0x1e3)](_0x367f6a(0x219),_0x31864b?.['message']||_0x31864b);break;}_0x4ef01d++;}console[_0x367f6a(0x230)](_0x367f6a(0x20e),_0x367f6a(0x1e8));}typeof window!==_0x27c232(0x1d8)&&(window[_0x27c232(0x23e)]={'runQuiz':runQuiz,'setApiKey':setApiKey,'setSelectors':setSelectors,'_STATE':STATE,'_CONFIG':CONFIG});
